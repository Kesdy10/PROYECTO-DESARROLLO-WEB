<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Don Gato</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='img/encabezado/logo.jpeg') }}">
</head>
<body>
<header>
    <div class="izquierda">
        <a href="{{ url_for('index') }}">
            <img src="{{ url_for('static', filename='img/encabezado/logo.jpeg') }}" alt="Logo">
        </a>
        <h1>DON GATO</h1>
    </div>

    <div class="derecha">
            <a href="{{ url_for('cuenta') }}" class="cuenta">
            <img src="/static/img/encabezado/perfil.png" alt="Cuenta">
        </a>
            <a href="{{ url_for('contacto') }}" class="contacto">
            <img src="/static/img/encabezado/mensaje.png" alt="Contacto">
        </a>
            <a href="{{ url_for('carrito') }}" class="carrito">
            <img src="/static/img/encabezado/carrito.png" alt="Carrito">
        </a>
    </div>
</header>

<main>
    <div class="cuenta">
        <br>
        <h1>Carrito</h1>
        <table style="width:100%; font-size:18px; margin-bottom:20px; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th style="text-align: left; padding: 12px; border-bottom: 2px solid #ddd;">Producto</th>
                    <th style="text-align: center; padding: 12px; border-bottom: 2px solid #ddd; width: 100px;">Cantidad</th>
                    <th style="text-align: center; padding: 12px; border-bottom: 2px solid #ddd; width: 100px;">Precio</th>
                    <th style="text-align: center; padding: 12px; border-bottom: 2px solid #ddd; width: 100px;">Subtotal</th>
                </tr>
            </thead>
            <tbody id="carrito-productos">
                {% if carrito_items %}
                    {% for item in carrito_items %}
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 12px; text-align: left;">{{ item.nombre }} - Talla {{ item.talla }}</td>
                            <td style="padding: 12px; text-align: center;">1</td>
                            <td style="padding: 12px; text-align: center;">Q{{ item.precio }}</td>
                            <td style="padding: 12px; text-align: center;">Q{{ item.precio }}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="4" style="padding: 20px; text-align: center; color: #666;">El carrito está vacío</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>

        <h2>Resumen</h2>
        <div id="resumenFactura" style="font-size:18px; margin-bottom:20px;">
            {% if carrito_items %}
                <p><strong>Total de productos:</strong> {{ carrito_items|length }}</p>
                <p><strong>Total a pagar:</strong> Q{{ carrito_items|sum(attribute='precio')|int }}</p>
            {% else %}
                <p>No hay productos en el carrito</p>
            {% endif %}
        </div>
        {% if carrito_items %}
            <form method="POST" action="{{ url_for('confirmar_pedido') }}">
                <button type="submit" style="font-size: 22px; margin-bottom: 30px; padding: 5px; width: 275px;" id="confirmarPedido">Confirmar pedido</button>
            </form>
        {% else %}
            <button style="font-size: 22px; margin-bottom: 30px; padding: 5px; width: 275px;" id="confirmarPedido" disabled>Confirmar pedido</button>
        {% endif %}
    </div>
</main>

<footer>
    &copy; 2025 Don Gato. Todos los derechos reservados.
</footer>
<script src="/static/js/script.js"></script>
</body>
</html>